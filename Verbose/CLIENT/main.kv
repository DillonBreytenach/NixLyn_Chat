#: import Button kivy.uix.button.Button
#: import Label kivy.uix.label.Label
#: import Clock kivy.clock.Clock


#-----------------------------------------------------------------------------------------------------

WindowManager:
<WindowManager>:
    Main_WID:
    Login:
    Register:
    Home:
    Contacts:
    Chats:
    New_Log:
    Search:
    Add_C:

#-----------------------------------------------------------------------------------------------------
#POPUPS
    #ERROR/SUCCESSFUL
<Login_Fail>:
    title: "LOGIN_FAIL"
    Button:
        text: "[INCORRECT]:\nPSWD || USERNAME"
        on_release: root.dismiss()
<Reg_Fail>:
    title: "REG_FAIL"
    Button:
        text: "REG_FAIL"
        on_release: root.dismiss()
<Add_fail>:
    title: "NEW_CONTACT_FAIL"
    MDFloatLayout:
        Button:
            text: "ADDING\nCONTACT\nFAILED"
            size_hint: 1, 1
            pos_hint: {'x': 0, 'y': 0}
            on_release: root.dismiss()
<Add_Success>:
    title: "NEW_CONTACT_ADDED"
    MDFloatLayout:
        Button:
            text: "ADDING\nCONTACT\nSUCCESSFUL"
            size_hint: 1, 1
            pos_hint: {'x': 0, 'y': 0}
            on_release: root.dismiss()


#-----------------------------------------------------------------------------------------------------
    #WELCOME
<Welcome>:
    title: "Welcome"
    Button:
        text: "WELCOME"
        on_release: root.dismiss()


#-----------------------------------------------------------------------------------------------------
    #ADD_CONTACT
<Add_C>:
    name: 'add_c'
    add_ed: self.added_cont

    MDFloatLayout:
        TextInput:
            id: NEW_CONTACT
            size_hint: .6, .2
            pos_hint: {'x': .2, 'y': .6}
        Button:
            text: "BACK"
            size_hint: .1, .1
            pos_hint: {'x': .9, 'y': .9}
            on_release:
                root.back()

        Button:
            text: "ADD"
            size_hint: .6, .2
            pos_hint: {'x': .2, 'y': .3}
            on_release: 
                root.add_c()
                if root.add_ed == '1': print("ADDED")  #root.Add_Success()



#-----------------------------------------------------------------------------------------------------
#SCREENS
    #FUNC_S
<New_Log>:
    name: 'New_Log'
    MDFloatLayout:

        Button:
            id: NewLog
            text: "NEW_LOG"

        Button:
            id: back
            text: "BACK"
            on_release: root.back()
<Search>:
    name: 'Search'
    MDFloatLayout:

        Button:
            id: SEARCH
            text: "SEARCH"

        Button:
            id: back
            text: "BACK"
            on_release: root.back()

#-----------------------------------------------------------------------------------------------------
    #CONTACTS && CHATS
<Scroll_Me>:
    viewclass: "Chat_Buttons"
    RecycleBoxLayout:
        default_size: None, None
        default_size_hint: 1, None
        size_hint_y: None
        orientation: 'vertical'
        height: self.minimum_height
        pos_hint: {'center_x': 0.5, 'center_y': 0.4}
<Contacts>:
    id: Contacts
    name: 'Contacts'
    scrollerName: Scroll_Me
    MDFloatLayout:

        Button:
            id: USER
            text: "USER"
            size_hint: .7, .1
            pos_hint: {'x': 0.2,'y': 0.9}

        Button:
            id: add
            text: "+"
            size_hint: .1, .1
            pos_hint: {'x': 0.9,'y': 0.9}
            on_release: root.add_c()

        Button:
            id: Home
            text: "Home"
            size_hint: .5, .1
            pos_hint: {'x': 0.0,'y': 0.8}
            on_release: root.home()

        Button:
            id: CONTACTS
            text: "CONTACTS"
            disabled: True
            size_hint: .5, .1
            pos_hint: {'x': 0.5,'y': 0.8}

        Button:
            id: EXIT
            text: "EXIT"
            size_hint: .2, .1
            pos_hint: {'x': 0.0,'y': 0.9}
            on_press: root.back()
        
        Scroll_Me:
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            id: Scroll_Me



#-----------------------------------------------------------------------------------------------------
<Scroll_Chats>:
    viewclass: "Chat_Msgs"
    RecycleBoxLayout:
        default_size: None, None
        default_size_hint: 1, None
        size_hint_y: None
        orientation: 'vertical'
        height: self.minimum_height


<Chats>:
    id: Chats
    name: 'Chats'
    scrollerName: Scroll_Chats

    MDFloatLayout:
        Scroll_Chats:
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}
            id: Scroll_Chats


        Button:
            id: TARGET_USER
            text: "USER"
            size_hint: .6, .1
            pos_hint: {'x': 0.2,'y': 0.9}

        Button:
            id: USER_STATUS
            text: "OFFLINE"
            size_hint: .2, .1
            pos_hint: {'x': 0.8,'y': 0.9}

        Button:
            id: Home
            text: "Home"
            size_hint: .5, .1
            pos_hint: {'x': 0.0,'y': 0.8}
            on_release: root.home()

        Button:
            id: CONTACTS
            text: "CONTACTS"
            disabled: True
            size_hint: .5, .1
            pos_hint: {'x': 0.5,'y': 0.8}

        Button:
            id: EXIT
            text: "EXIT"
            size_hint: .2, .1
            pos_hint: {'x': 0.0,'y': 0.9}
            on_press: root.back()


#-----------------------------------------------------------------------------------------------------
    #MAIN_PROFILE_HANDLE
<Home>:
    name: 'Home'

    #MAIN_PROFILE_SCREEN
    MDFloatLayout:
        orientation: 'vertical'

        Button:
            id: USER
            text: "USER"
            size_hint: .8, .1
            pos_hint: {'x': 0.2,'y': 0.9}

        Button:
            id: Home
            text: "Home"
            disabled: True
            size_hint: .5, .1
            pos_hint: {'x': 0.0,'y': 0.8}

        Button:
            id: CONTACTS
            text: "CONTACTS"
            size_hint: .5, .1
            pos_hint: {'x': 0.5,'y': 0.8}
            on_release: root.chats()

        Button:
            id: NEW_LOG
            text: "NEW_LOG"
            size_hint: .8, .2
            pos_hint: {'x': 0.1,'y': 0.5}
            on_press: root.new_log()

        Button:
            id: SEARCH_
            text: "SEARCH"
            size_hint: .8, .2
            pos_hint: {'x': 0.1,'y': 0.3}
            on_press: root.search()



        Button:
            id: EXIT
            text: "EXIT"
            size_hint: .2, .1
            pos_hint: {'x': 0.0,'y': 0.9}
            on_press: root.back()
<Login>:
    name: 'Login'
    BoxLayout:
        orientation:'vertical'

        Button:
            id: HEAD_LINE
            text: "LOGIN"
            size_hint: .8, .2
            pos_hint: {'x': 0.1,'y': 0.85}
            on_release: root.back()

        TextInput:
            id: REP_NAME
            hint_text: "USERNAME"
            size_hint: .8, .2
            pos_hint: {'x': 0.1,'y': 0.6}

 
        TextInput:
            id: PSWD
            hint_text: "PASSWORD"
            size_hint: .8, .2
            pos_hint: {'x': 0.1, 'y': 0.35}

        Button:
            id: LOG_IN
            text: 'LOGIN'
            size_hint: .8, .2
            pos_hint: {'x': 0.1,'y': 0.05}
            on_release: root.login_()
<Register>:
    name: 'Register'
    BoxLayout:
        orientation:'vertical'

        Button:
            id: HEAD_LINE
            text: "REGISTER"
            size_hint: .8, .2
            pos_hint: {'x': 0.10,'y': 0.85}
            on_release: root.back()

        TextInput:
            id: REP_NAME
            hint_text: "USERNAME"
            size_hint: .8, .2
            pos_hint: {'x': 0.1,'y': 0.6}

 
        TextInput:
            id: PSWD
            hint_text: "PASSWORD"
            size_hint: .8, .2
            pos_hint: {'x': 0.1,'y': 0.35}

        Button:
            id: REG
            text:'REGISTER'
            size_hint: .8, .2
            pos_hint: {'x': 0.1,'y': 0.05}
            on_release: root.Register_()

#-----------------------------------------------------------------------------------------------------
    #Main_WID
<Main_WID>:
    name: "Main_WID"
    MDFloatLayout:
        orientation: 'vertical'

        #Image:
        #    pos_hint: {'x': 0.0,'y': -0.2}
        #    size_hint: 1.5, 1.5
        #    source: "ASSETS/BACKGROUND.jpeg"
        #    allow_stretch: True

        Button:
            id: HEAD_LINE
            text:'VERBOSE HOLDING'
            font_size: 29
            color: (0, 0, 0, 1)
            size_hint: .8, .1
            pos_hint: {'x': 0.1,'y': 0.85}

 
        Button:
            text: "REGISTER"
            font_size: 25
            color: (210/255, 151/255, 32/255, 1)#USE COLOR PICKER
            size_hint: .8, .2
            pos_hint: {'x': 0.1,'y': 0.5}# 0.2, .4
            on_press: root.Register()

        Button:
            text: "LOGIN"
            font_size: 25
            color: (210/255, 151/255, 32/255, 1)#USE COLOR PICKER
            size_hint: .8, .2
            pos_hint: {'x': 0.1,'y': 0.3}# 0.2, .4
            on_press: root.Login()

        Button:
            text: "Exit"
            font_size: 25
            color: (210/255, 151/255, 32/255, 1)#USE COLOR PICKER
            size_hint: .8, .20
            pos_hint: {'x': 0.1,'y': 0.1}# 0.2, .4
            on_press: root.Exit()